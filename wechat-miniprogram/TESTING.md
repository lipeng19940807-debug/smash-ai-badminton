# 小程序测试指南

## 后端服务状态

✅ **后端服务已启动**
- 服务地址: `http://localhost:8000`
- 本机IP: `192.168.31.54`
- API地址: `http://192.168.31.54:8000/api`
- API文档: `http://localhost:8000/docs`

## 测试步骤

### 1. 注册新用户

1. 打开小程序，点击"立即登录"
2. 在登录页面，点击顶部的"注册"标签
3. 填写信息：
   - 用户昵称：例如 `testuser`
   - 电子邮箱（可选）：例如 `test@example.com`
   - 密码：至少6位，例如 `123456`
4. 点击"立即注册"按钮
5. 注册成功后会自动跳转到首页

### 2. 登录已有账号

1. 在登录页面，确保"登录"标签被选中（默认）
2. 填写信息：
   - 用户名：输入之前注册的用户名
   - 密码：输入对应的密码
3. 点击"立即登录"按钮
4. 登录成功后会自动跳转到首页

### 3. 微信一键登录

1. 在登录页面，点击"微信一键登录"按钮
2. 系统会自动调用微信登录接口
3. 登录成功后会自动跳转到首页

## 常见问题

### 问题1: 连接被拒绝 (ERR_CONNECTION_REFUSED)

**原因：** 后端服务未启动或IP地址不正确

**解决方法：**
1. 确认后端服务已启动：`curl http://localhost:8000/health`
2. 检查 `utils/config.js` 中的 `BASE_URL` 是否正确
3. 在微信开发者工具中勾选"不校验合法域名"

### 问题2: 注册/登录失败

**可能原因：**
- 用户名已存在（注册时）
- 用户名或密码错误（登录时）
- 网络连接问题

**解决方法：**
- 查看错误提示信息
- 检查网络连接
- 确认后端服务正常运行

### 问题3: 登录后无法进入首页

**解决方法：**
1. 检查控制台是否有错误
2. 确认 token 已正确保存：`wx.getStorageSync('token')`
3. 检查首页的登录状态检查逻辑

## 调试技巧

1. **查看网络请求：**
   - 在微信开发者工具中打开"调试器"
   - 切换到"Network"标签
   - 查看请求和响应详情

2. **查看控制台日志：**
   - 在"调试器"的"Console"标签查看日志
   - 关注错误信息和警告

3. **检查存储数据：**
   - 在"调试器"的"Storage"标签查看本地存储
   - 确认 token 和 userInfo 是否正确保存

## 测试账号

可以使用以下测试账号进行测试：

- 用户名: `testuser5`
- 密码: `123456`

或者注册新账号进行测试。
