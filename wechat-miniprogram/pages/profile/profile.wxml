<!--pages/profile/profile.wxml-->
<view class="page-container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="header">
    <view class="header-content">
      <view class="back-btn" bindtap="handleBack">
        <text class="back-icon">â†</text>
      </view>
      <text class="header-title">ä¸ªäººä¸­å¿ƒ</text>
      <view class="header-right"></view>
    </view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar-section">
      <image class="avatar" src="{{userInfo.avatar_url || '/static/default-avatar.png'}}" mode="aspectFill" binderror="handleImageError"></image>
      <view class="avatar-badge">ğŸ¸</view>
    </view>
    <view class="user-info-section">
      <text class="username">{{userInfo.nickname || userInfo.username || 'æœªè®¾ç½®æ˜µç§°'}}</text>
      <text class="user-id">ID: {{userInfo.username || 'æœªçŸ¥'}}</text>
      <text class="user-email" wx:if="{{userInfo.email}}">{{userInfo.email}}</text>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="stats-section">
    <view class="stat-item">
      <text class="stat-value">{{stats.points || 0}}</text>
      <text class="stat-label">ç§¯åˆ†</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{stats.analyses_count || 0}}</text>
      <text class="stat-label">åˆ†ææ¬¡æ•°</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">{{stats.best_speed || 0}}</text>
      <text class="stat-label">æœ€ä½³é€Ÿåº¦</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-group">
      <view class="menu-item" bindtap="goToHistory">
        <view class="menu-icon">ğŸ“Š</view>
        <text class="menu-text">æˆ‘çš„è®°å½•</text>
        <text class="menu-arrow">â€º</text>
      </view>
      <view class="menu-item" bindtap="goToPoints">
        <view class="menu-icon">ğŸ’°</view>
        <text class="menu-text">ç§¯åˆ†æ˜ç»†</text>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>

    <view class="menu-group">
      <view class="menu-item" bindtap="showAbout">
        <view class="menu-icon">â„¹ï¸</view>
        <text class="menu-text">å…³äºæˆ‘ä»¬</text>
        <text class="menu-arrow">â€º</text>
      </view>
      <view class="menu-item" bindtap="showHelp">
        <view class="menu-icon">â“</view>
        <text class="menu-text">ä½¿ç”¨å¸®åŠ©</text>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- ç™»å‡ºæŒ‰é’® -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
  </view>
</view>
